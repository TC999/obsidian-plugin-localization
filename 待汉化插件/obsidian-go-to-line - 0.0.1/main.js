/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

class MyPlugin extends obsidian.Plugin {
    onload() {
        this.addCommand({
            id: 'go-to-line',
            name: 'Go to line',
            checkCallback: (checking) => {
                let leaf = this.app.workspace.activeLeaf;
                if (leaf && leaf.getViewState().type === "markdown" && leaf.getViewState().state.mode === "source") {
                    if (!checking) {
                        //@ts-ignore
                        new GotoModal(this.app, leaf.view.editor).open();
                    }
                    return true;
                }
                return false;
            }
        });
    }
}
class GotoModal extends obsidian.SuggestModal {
    constructor(app, editor) {
        super(app);
        this.editor = editor;
        this.modalEl.addClass("GTL-modal");
        this.inputEl.placeholder = `Line Number between 1 and ${editor.lineCount()}`;
    }
    getSuggestions(str) {
        if (str) {
            const operations = str.split(":");
            if (operations.length === 2) {
                const line = Number.parseInt(operations.first());
                const char = Number.parseInt(operations.last());
                if (line >= 0 && line < this.editor.lineCount()
                    && char >= 0 && char <= this.editor.getLine(line - 1).length) {
                    this.inputEl.removeClass("is-invalid");
                    return [str];
                }
            }
            else {
                const line = Number.parseInt(operations.first());
                if (line >= 0 && line < this.editor.lineCount()) {
                    this.inputEl.removeClass("is-invalid");
                    return [str];
                }
            }
            this.inputEl.addClass("is-invalid");
        }
        else {
            this.inputEl.removeClass("is-invalid");
            return [(-1).toString()];
        }
    }
    renderSuggestion(_, __) {
        return;
    }
    onChooseSuggestion(item, _) {
        const operations = item.split(":");
        if (operations.length === 2) {
            const line = Number.parseInt(operations.first());
            const char = Number.parseInt(operations.last());
            if (line != -1) {
                this.editor.setCursor({
                    line: line - 1,
                    ch: char,
                });
            }
        }
        else {
            const line = Number.parseInt(operations.first());
            if (line != -1) {
                this.editor.setCursor({
                    line: line - 1,
                    ch: 0,
                });
            }
        }
    }
}

module.exports = MyPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6bnVsbCwibmFtZXMiOlsiUGx1Z2luIiwiU3VnZ2VzdE1vZGFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7TUFFcUIsUUFBUyxTQUFRQSxlQUFNO0lBQzNDLE1BQU07UUFDTCxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQ2YsRUFBRSxFQUFFLFlBQVk7WUFDaEIsSUFBSSxFQUFFLFlBQVk7WUFDbEIsYUFBYSxFQUFFLENBQUMsUUFBaUI7Z0JBQ2hDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQztnQkFDekMsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLElBQUksS0FBSyxVQUFVLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssUUFBUSxFQUFFO29CQUNuRyxJQUFJLENBQUMsUUFBUSxFQUFFOzt3QkFFZCxJQUFJLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7cUJBQ2pEO29CQUNELE9BQU8sSUFBSSxDQUFDO2lCQUNaO2dCQUNELE9BQU8sS0FBSyxDQUFDO2FBQ2I7U0FDRCxDQUFDLENBQUM7S0FDSDtDQUNEO0FBRUQsTUFBTSxTQUFVLFNBQVFDLHFCQUFvQjtJQUczQyxZQUFZLEdBQVEsRUFBRSxNQUFjO1FBQ25DLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNYLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBRXJCLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxHQUFHLDZCQUE2QixNQUFNLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQztLQUM3RTtJQUdELGNB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
